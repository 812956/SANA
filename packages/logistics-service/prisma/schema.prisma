generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Child {
  id           String   @id @default(uuid())
  name         String
  age          Int
  status       String
  location     String
  city         String
  country      String
  lat          Float
  lng          Float
  wishlist     String?
  behaviorScore Int    @default(50)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  reports      Report[]
}

model Report {
  id          String   @id @default(uuid())
  type        String   // NICE | NAUGHTY
  description String
  mediaUrl    String?
  lat         Float?
  lng         Float?
  locationName String?
  timestamp   DateTime @default(now())
  childId     String
  child       Child    @relation(fields: [childId], references: [id])
  reporterId  String?
  reporter    Elf?     @relation(fields: [reporterId], references: [id])
}

model Elf {
  id        String    @id @default(uuid())
  agentId   String    @unique
  name      String
  password  String
  avatarUrl String?   @default("https://api.dicebear.com/7.x/avataaars/svg?seed=Elf")
  status    String    @default("OFFLINE") // ONLINE, OFFLINE, BUSY
  points    Int       @default(0)
  level     Int       @default(1)
  title     String    @default("Junior Elf")
  department String   @default("Toy Making")
  badges    String[]  @default([])
  lastActive DateTime @default(now())
  createdAt DateTime  @default(now())
  workLogs  WorkLog[]
  reports   Report[]
}

model WorkLog {
  id          String   @id @default(uuid())
  elfId       String
  elf         Elf      @relation(fields: [elfId], references: [id])
  action      String   // REPORT, LOGIN, UPDATE
  description String
  pointsEarned Int
  timestamp   DateTime @default(now())
}

